(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9809],{6501:function(n,r,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/article/games/sudoku",function(){return t(7562)}])},7562:function(n,r,t){"use strict";t.r(r),t.d(r,{__N_SSG:function(){return y},default:function(){return N},description:function(){return k},frontMatter:function(){return _},tag:function(){return C},title:function(){return j},updated:function(){return q}});var i=t(4246),l=t(1670),u=t(53),o=t(851),s=t(5322),e=t(7667),a=t(7223),c=t(1037),h=t(2900),d=t(9312),f=t(5360),m=function(){function n(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];(0,h._)(this,n),this.row=0,this.column=0,this.original=n.generateEmptyBoards(),this.direction="forward",this.boards=n.generateEmptyBoards(),this.init(r)}var r=n.prototype;return r.init=function(n){for(var r=0;r<this.original.length;r+=1)for(var t,i,l=0;l<this.original[r].length;l+=1)this.original[r][l]=null!==(i=null==n?void 0:null===(t=n[r])||void 0===t?void 0:t[l])&&void 0!==i?i:null;this.reset()},r.reset=function(){this.row=0,this.column=0,this.boards=this.original.map(function(n){return(0,s._)(n)})},r.fill=function(){var r=this;if(null===this.original[this.row][this.column]){var t=this.boards[this.row],i=this.boards.map(function(n){return n[r.column]}),l=this.column-this.column%3,u=this.row-this.row%3,o=this.boards.reduce(function(n,r,t){return t>=u&&t<u+3&&n.push.apply(n,(0,s._)(r.slice(l,l+3))),n},[]),e=n.nums.filter(function(n){return!t.includes(n)&&!i.includes(n)&&!o.includes(n)}).find(function(n){var t=r.boards[r.row][r.column];return null===t||n>t});e?(this.boards[this.row][this.column]=e,this.direction="forward"):(this.boards[this.row][this.column]=null,this.direction="back")}},r.round=function(){return this.column>n.square-1?(this.row+=1,this.column=0,!0):this.column<0?(this.row-=1,this.column=n.square-1,!0):(this.fill(),this.column="forward"===this.direction?this.column+1:this.column-1,!1)},r.destroy=function(){var n;null===(n=this.abortController)||void 0===n||n.abort()},r.async=function(r){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=this;return(0,c._)(function(){return(0,d.Jh)(this,function(l){switch(l.label){case 0:i.abortController=new AbortController,i.reset(),l.label=1;case 1:if(!(i.row<n.square&&i.row>=0))return[3,3];if(i.round())return[3,1];return[4,(0,f._v)(t,i.abortController.signal)];case 2:return l.sent(),null==r||r(i.boards),[3,1];case 3:if(i.row<0)throw Error("无解");return[2,i.boards]}})})()},r.sync=function(){for(this.reset();this.row<n.square&&this.row>=0;)this.round();if(this.row<0)throw Error("无解");return this.boards},n.generateEmptyBoards=function(){return Array(n.square).fill(null).map(function(){return Array(n.square).fill(null)})},n}();m.nums=[1,2,3,4,5,6,7,8,9],m.square=9;var w=t(7149),b=t(8062);function p(){var n=(0,o._)(["\n  padding: 20px;\n  margin: 0 0 20px 0;\n  .boards{\n    border-collapse: collapse;\n    .row{\n      display: flex;\n    }\n    .item{\n      width: 50px;\n      height: 50px;\n      vertical-align: middle;\n      text-align: center;\n    }\n  }\n"]);return p=function(){return n},n}var g=(0,w.ZP)(a.m).withConfig({componentId:"sc-967aa067-0"})(p()),v=function(){var n=(0,e.useMemo)(function(){return new m([[null,null,null,null,6,null,4,null,null],[null,2,null,null,5,1,null,null,null],[null,9,null,null,null,null,6,null,7],[7,null,5,null,null,null,9,null,null],[null,null,null,2,null,4,null,null,null],[null,null,2,null,null,null,3,null,6],[1,null,9,null,null,null,null,5,null],[null,null,null,9,1,null,null,3,null],[null,null,8,null,7,null,null,null,null]])},[]),r=(0,u._)((0,e.useState)(n.boards),2),t=r[0],l=r[1],o=(0,e.useCallback)(function(){n.async(function(n){l((0,s._)(n))}).catch(function(){})},[n]);return(0,e.useEffect)(function(){return function(){return n.destroy()}},[n]),(0,i.jsxs)(g,{children:[(0,i.jsx)("table",{className:"boards",children:(0,i.jsx)("tbody",{children:t.map(function(n,r){return(0,i.jsx)("tr",{className:"row",children:n.map(function(n,r){return(0,i.jsx)("td",{className:"item",children:n},r)})},r)})})}),(0,i.jsx)(b.ZP,{onClick:o,children:"开始"})]})},x=t(5685),y=!0,_={title:"数独",description:"web版数独计算器",tag:["算法","web前端","游戏"],updated:"2023-02-22T07:57:53.000Z"},j="数独",k="web版数独计算器",C=["算法","web前端","游戏"],q="2023-02-22T07:57:53.000Z",E=function(n){return(0,i.jsx)(x.s,n)};function S(n){var r=Object.assign({h1:"h1",pre:"pre",code:"code"},(0,l.ah)(),n.components);return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(r.h1,{id:"暴力破解大法",children:"暴力破解大法"}),"\n",(0,i.jsx)(v,{}),"\n",(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-typescript",children:"import { sleep } from '@shared/utils';\n\nclass Sudoku {\n  static readonly nums = [1, 2, 3, 4, 5, 6, 7, 8, 9];\n  static readonly square = 9;\n  static generateEmptyBoards() {\n    return new Array(Sudoku.square).fill(null).map(() => new Array(Sudoku.square).fill(null)) as (null | number)[][];\n  }\n  private row = 0;\n  private column = 0;\n  private original = Sudoku.generateEmptyBoards();\n  private direction: 'forward' | 'back' = 'forward';\n  private abortController?: AbortController;\n\n  public boards = Sudoku.generateEmptyBoards();\n\n  constructor(boards: (null | number)[][] = []) {\n    this.init(boards);\n  }\n\n  public init(boards: (null | number)[][]) {\n    for (let i = 0; i < this.original.length; i += 1) {\n      for (let j = 0; j < this.original[i].length; j += 1) {\n        this.original[i][j] = boards?.[i]?.[j] ?? null;\n      }\n    }\n    this.reset();\n  }\n  public reset() {\n    this.row = 0;\n    this.column = 0;\n    this.boards = this.original.map(row => [...row]);\n  }\n  public fill() {\n    if (this.original[this.row][this.column] === null) {\n      const rows = this.boards[this.row];\n      const columns = this.boards.map(row => row[this.column]);\n      const startColumn = this.column - this.column % 3;\n      const startRow = this.row - this.row % 3;\n      const squares = this.boards.reduce((pre, current, index) => {\n        if (index >= startRow && index < startRow + 3) {\n          pre.push(...current.slice(startColumn, startColumn + 3));\n        }\n        return pre;\n      }, [] as (number | null)[]);\n      const availableNums = Sudoku.nums.filter(num => !rows.includes(num) && !columns.includes(num) && !squares.includes(num));\n      const available = availableNums.find(num => {\n        const current = this.boards[this.row][this.column];\n        return current === null || num > current;\n      });\n      if (available) {\n        this.boards[this.row][this.column] = available;\n        this.direction = 'forward';\n      } else {\n        this.boards[this.row][this.column] = null;\n        this.direction = 'back';\n      }\n    }\n  }\n  private round() {\n    if (this.column > Sudoku.square - 1) {\n      this.row += 1;\n      this.column = 0;\n      return true;\n    }\n    if (this.column < 0) {\n      this.row -= 1;\n      this.column = Sudoku.square - 1;\n      return true;\n    }\n    this.fill();\n    this.column = this.direction === 'forward' ? this.column + 1 : this.column - 1;\n    return false;\n  }\n  public destroy() {\n    this.abortController?.abort();\n  }\n  public async async(cb?: (boards: (number | null)[][]) => void, millisecond = 0) {\n    this.abortController = new AbortController();\n    this.reset();\n    while (this.row < Sudoku.square && this.row >= 0) {\n      if (this.round()) continue;\n      await sleep(millisecond, this.abortController.signal);\n      cb?.(this.boards);\n    }\n    if (this.row < 0) {\n      throw new Error('无解');\n    }\n    return this.boards;\n  }\n  public sync() {\n    this.reset();\n    while (this.row < Sudoku.square && this.row >= 0) {\n      this.round();\n    }\n    if (this.row < 0) {\n      throw new Error('无解');\n    }\n    return this.boards;\n  }\n}\n\nexport { Sudoku };\n"})})]})}var N=function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,i.jsx)(E,Object.assign({},n,{children:(0,i.jsx)(S,n)}))}},3121:function(n){"use strict";n.exports=ReactTransitionGroup},9378:function(n){"use strict";n.exports=algoliasearch},7513:function(n){"use strict";n.exports=rxjs}},function(n){n.O(0,[9894,2128,3554,5685,9774,2888,179],function(){return n(n.s=6501)}),_N_E=n.O()}]);