(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[996],{8741:function(n,e,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/article/git/log",function(){return s(5595)}])},5595:function(n,e,s){"use strict";s.r(e),s.d(e,{__N_SSG:function(){return r},frontMatter:function(){return a},tag:function(){return d},title:function(){return h},updated:function(){return t}});var c=s(4246),i=s(1670),l=s(5685),r=!0,a={title:"git log 常用命令",tag:["git"],updated:"2023-02-22T07:57:53.000Z"},h="git log 常用命令",d=["git"],t="2023-02-22T07:57:53.000Z",o=function(n){return(0,c.jsx)(l.s,n)};function x(n){var e=Object.assign({h1:"h1",p:"p",pre:"pre",code:"code",h2:"h2",a:"a",ol:"ol",li:"li",blockquote:"blockquote"},(0,i.ah)(),n.components);return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(e.h1,{id:"示例",children:"示例"}),"\n",(0,c.jsx)(e.p,{children:"遍历src/pages下的所有文件, 将每个文件的mtime修改为git log 中最后一次提交的时间"}),"\n",(0,c.jsx)(e.pre,{children:(0,c.jsx)(e.code,{className:"language-shell",children:'#!/bin/sh\n\ngit ls-tree -r --name-only HEAD src/pages | while read filename; do\n\ntouch -d "$(git log -1 --format="%ai" -- $filename)" $filename\n\ndone\n'})}),"\n",(0,c.jsx)(e.pre,{children:(0,c.jsx)(e.code,{className:"language-bash",children:"# 执行以上命令时注意修改git config core.quotepath，否则包含中文名称的路径将会被转移成\\xx\\xx从而引发报错\ngit config --global core.quotepath false\n"})}),"\n",(0,c.jsx)(e.h2,{id:"应用场景",children:"应用场景"}),"\n",(0,c.jsx)(e.p,{children:"我们可以在编译期间，获取每个文件的最后提交时间，比如本项目，在执行git actions时，遍历每篇文章的最后提交时间，作为文章的最后更新时间。"}),"\n",(0,c.jsx)(e.p,{children:(0,c.jsx)(e.a,{href:"https://github.com/lemonied/lemonied.github.io/tree/master/packages/mtime/src/index.ts",children:"示例代码"})}),"\n",(0,c.jsx)(e.h1,{id:"--format-参数详解",children:"--format 参数详解"}),"\n",(0,c.jsx)(e.h2,{id:"作者",children:"作者"}),"\n",(0,c.jsxs)(e.ol,{children:["\n",(0,c.jsxs)(e.li,{children:["\n",(0,c.jsxs)(e.p,{children:[(0,c.jsx)(e.code,{children:"%an"})," ",(0,c.jsx)(e.code,{children:"%aN"})," 作者名称"]}),"\n",(0,c.jsx)(e.pre,{children:(0,c.jsx)(e.code,{className:"language-bash",children:'git log -1 --format="%an" -- filepath\n# output: ChenJiYuan\n'})}),"\n"]}),"\n",(0,c.jsxs)(e.li,{children:["\n",(0,c.jsxs)(e.p,{children:[(0,c.jsx)(e.code,{children:"%ae"})," ",(0,c.jsx)(e.code,{children:"%aE"})," 作者邮箱"]}),"\n",(0,c.jsx)(e.pre,{children:(0,c.jsx)(e.code,{className:"language-bash",children:'git log -1 --format="%ae" -- filepath\n# output: chenjiyuan.super@gmail.com\n'})}),"\n"]}),"\n",(0,c.jsxs)(e.li,{children:["\n",(0,c.jsxs)(e.p,{children:[(0,c.jsx)(e.code,{children:"%aD"})," 提交时间(rfc2882)"]}),"\n",(0,c.jsx)(e.pre,{children:(0,c.jsx)(e.code,{className:"language-bash",children:'git log -1 --format="%aD" -- filepath\n# output: Wed Aug 24 12:33:50 2022 +0800\n'})}),"\n"]}),"\n",(0,c.jsxs)(e.li,{children:["\n",(0,c.jsxs)(e.p,{children:[(0,c.jsx)(e.code,{children:"%ar"})," 提交时间(相对时间)"]}),"\n",(0,c.jsx)(e.pre,{children:(0,c.jsx)(e.code,{className:"language-bash",children:'git log -1 --format="%ar" -- filepath\n# output: 3 hours ago\n'})}),"\n"]}),"\n",(0,c.jsxs)(e.li,{children:["\n",(0,c.jsxs)(e.p,{children:[(0,c.jsx)(e.code,{children:"%at"})," 提交时间(timestamp)"]}),"\n",(0,c.jsx)(e.pre,{children:(0,c.jsx)(e.code,{className:"language-bash",children:'git log -1 --format="%at" -- filepath\n# output: 1661315630\n'})}),"\n"]}),"\n",(0,c.jsxs)(e.li,{children:["\n",(0,c.jsxs)(e.p,{children:[(0,c.jsx)(e.code,{children:"%ai"})," 提交时间(iso8601)"]}),"\n",(0,c.jsx)(e.pre,{children:(0,c.jsx)(e.code,{className:"language-bash",children:'git log -1 --format="%ai" -- filepath\n# output: 2022-08-24 12:33:50 +0800\n'})}),"\n"]}),"\n"]}),"\n",(0,c.jsx)(e.h2,{id:"提交者",children:"提交者"}),"\n",(0,c.jsxs)(e.blockquote,{children:["\n",(0,c.jsx)(e.p,{children:"%c 和 %a 开头的写法，一个是作者信息，一个是提交者信息，测试的输出结果一致, 不知道有什么区别"}),"\n"]}),"\n",(0,c.jsxs)(e.ol,{children:["\n",(0,c.jsxs)(e.li,{children:["\n",(0,c.jsxs)(e.p,{children:[(0,c.jsx)(e.code,{children:"%cn"})," ",(0,c.jsx)(e.code,{children:"%cN"})," 提交者的名字"]}),"\n",(0,c.jsx)(e.pre,{children:(0,c.jsx)(e.code,{className:"language-bash",children:'git log -1 --format="%cn" -- filepath\n# output: ChenJiYuan\n'})}),"\n"]}),"\n",(0,c.jsxs)(e.li,{children:["\n",(0,c.jsxs)(e.p,{children:[(0,c.jsx)(e.code,{children:"%ce"})," ",(0,c.jsx)(e.code,{children:"%cE"})," 提交者的邮箱"]}),"\n",(0,c.jsx)(e.pre,{children:(0,c.jsx)(e.code,{className:"language-bash",children:'git log -1 --format="%ce" -- filepath\n# output: chenjiyuan.super@gmail.com\n'})}),"\n"]}),"\n",(0,c.jsxs)(e.li,{children:["\n",(0,c.jsxs)(e.p,{children:[(0,c.jsx)(e.code,{children:"%cD"})," 提交时间(rfc2882)"]}),"\n",(0,c.jsx)(e.pre,{children:(0,c.jsx)(e.code,{className:"language-bash",children:'git log -1 --format="%cD" -- filepath\n# output: Wed Aug 24 12:33:50 2022 +0800\n'})}),"\n"]}),"\n",(0,c.jsxs)(e.li,{children:["\n",(0,c.jsxs)(e.p,{children:[(0,c.jsx)(e.code,{children:"%cr"})," 提交时间(相对时间)"]}),"\n",(0,c.jsx)(e.pre,{children:(0,c.jsx)(e.code,{className:"language-bash",children:'git log -1 --format="%cr" -- filepath\n# output: 3 hours ago\n'})}),"\n"]}),"\n",(0,c.jsxs)(e.li,{children:["\n",(0,c.jsxs)(e.p,{children:[(0,c.jsx)(e.code,{children:"%ct"})," 提交时间(timestamp)"]}),"\n",(0,c.jsx)(e.pre,{children:(0,c.jsx)(e.code,{className:"language-bash",children:'git log -1 --format="%ct" -- filepath\n# output: 1661315630\n'})}),"\n"]}),"\n",(0,c.jsxs)(e.li,{children:["\n",(0,c.jsxs)(e.p,{children:[(0,c.jsx)(e.code,{children:"%ci"})," 提交时间(iso8601)"]}),"\n",(0,c.jsx)(e.pre,{children:(0,c.jsx)(e.code,{className:"language-bash",children:'git log -1 --format="%ci" -- filepath\n# output: 2022-08-24 12:33:50 +0800\n'})}),"\n"]}),"\n"]}),"\n",(0,c.jsx)(e.h2,{id:"hash相关",children:"Hash相关"}),"\n",(0,c.jsxs)(e.ol,{children:["\n",(0,c.jsxs)(e.li,{children:["\n",(0,c.jsxs)(e.p,{children:[(0,c.jsx)(e.code,{children:"%H"})," 提交的hash"]}),"\n",(0,c.jsx)(e.pre,{children:(0,c.jsx)(e.code,{className:"language-bash",children:'git log -1 --format="%H" -- filepath\n# output: c6ededc02c13877d62f7a1b1b004ca8db7d1dd1d\n'})}),"\n"]}),"\n",(0,c.jsxs)(e.li,{children:["\n",(0,c.jsxs)(e.p,{children:[(0,c.jsx)(e.code,{children:"%h"})," 提交的hash（缩写，前七位）"]}),"\n",(0,c.jsx)(e.pre,{children:(0,c.jsx)(e.code,{className:"language-bash",children:'git log -1 --format="%h" -- filepath\n# output: c6ededc\n'})}),"\n"]}),"\n",(0,c.jsxs)(e.li,{children:["\n",(0,c.jsxs)(e.p,{children:[(0,c.jsx)(e.code,{children:"%T"})," 树hash（tree hash）"]}),"\n",(0,c.jsx)(e.pre,{children:(0,c.jsx)(e.code,{className:"language-bash",children:'git log -1 --format="%T" -- filepath\n# output: 74c55360530c7f38e6f459b5d4d32a5ce7a973ac\n'})}),"\n"]}),"\n",(0,c.jsxs)(e.li,{children:["\n",(0,c.jsxs)(e.p,{children:[(0,c.jsx)(e.code,{children:"%t"})," 树hash（简写）"]}),"\n",(0,c.jsx)(e.pre,{children:(0,c.jsx)(e.code,{className:"language-bash",children:'git log -1 --format="%t" -- filepath\n# output: 74c5536\n'})}),"\n"]}),"\n",(0,c.jsxs)(e.li,{children:["\n",(0,c.jsxs)(e.p,{children:[(0,c.jsx)(e.code,{children:"%P"})," parent hash"]}),"\n",(0,c.jsx)(e.pre,{children:(0,c.jsx)(e.code,{className:"language-bash",children:'git log -1 --format="%P" -- filepath\n# output: e224982135575c4cf4c7bbdc9cf70c228444f10c\n'})}),"\n"]}),"\n",(0,c.jsxs)(e.li,{children:["\n",(0,c.jsxs)(e.p,{children:[(0,c.jsx)(e.code,{children:"%p"})," parent hash（简写）"]}),"\n",(0,c.jsx)(e.pre,{children:(0,c.jsx)(e.code,{className:"language-bash",children:'git log -1 --format="%p" -- filepath\n# output: e224982\n'})}),"\n"]}),"\n"]}),"\n",(0,c.jsx)(e.h2,{id:"commit-相关",children:"Commit 相关"}),"\n",(0,c.jsxs)(e.ol,{children:["\n",(0,c.jsxs)(e.li,{children:["\n",(0,c.jsxs)(e.p,{children:[(0,c.jsx)(e.code,{children:"%s"})," 提交信息的标题"]}),"\n",(0,c.jsx)(e.pre,{children:(0,c.jsx)(e.code,{className:"language-bash",children:'git log -1 --format="%s" -- filepath\n# output: Fix some bugs\n'})}),"\n"]}),"\n",(0,c.jsxs)(e.li,{children:["\n",(0,c.jsxs)(e.p,{children:[(0,c.jsx)(e.code,{children:"%f"})," 提交信息的标题（格式化后）"]}),"\n",(0,c.jsx)(e.pre,{children:(0,c.jsx)(e.code,{className:"language-bash",children:'git log -1 --format="%f" -- filepath\n# output: Fix-some-bugs\n'})}),"\n"]}),"\n",(0,c.jsxs)(e.li,{children:["\n",(0,c.jsxs)(e.p,{children:[(0,c.jsx)(e.code,{children:"%b"})," 提交信息的body"]}),"\n",(0,c.jsx)(e.pre,{children:(0,c.jsx)(e.code,{className:"language-bash",children:'git log -1 --format="%b" -- filepath\n# output: 1. improve xxxx\n#         2. fix xxx\n'})}),"\n"]}),"\n",(0,c.jsxs)(e.li,{children:["\n",(0,c.jsxs)(e.p,{children:[(0,c.jsx)(e.code,{children:"%d"})," ref name"]}),"\n",(0,c.jsx)(e.pre,{children:(0,c.jsx)(e.code,{className:"language-bash",children:'git log -1 --format="%d" -- filepath\n# output: (HEAD -> master, origin/master)\n'})}),"\n"]}),"\n",(0,c.jsxs)(e.li,{children:["\n",(0,c.jsxs)(e.p,{children:[(0,c.jsx)(e.code,{children:"%e"})," encoding（不知道是啥）"]}),"\n"]}),"\n"]})]})}e.default=function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,c.jsx)(o,Object.assign({},n,{children:(0,c.jsx)(x,n)}))}},3121:function(n){"use strict";n.exports=ReactTransitionGroup},9378:function(n){"use strict";n.exports=algoliasearch},7513:function(n){"use strict";n.exports=rxjs}},function(n){n.O(0,[9894,2128,3554,5685,9774,2888,179],function(){return n(n.s=8741)}),_N_E=n.O()}]);