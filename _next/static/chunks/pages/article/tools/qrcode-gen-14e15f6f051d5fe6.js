(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6953],{5849:function(n,e,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/article/tools/qrcode-gen",function(){return t(7208)}])},978:function(n,e,t){"use strict";t.d(e,{Q:function(){return x},E:function(){return N}});var r=t(53),i=t(851),c=t(4246),u=t(7149),o=t(7223),a=t(7667),s=t(9640),l=t(4024),d=t(7652),f=t(5644),p=t(8062);function v(){var n=(0,i._)(["\n  padding: 20px;\n  display: grid;\n  grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));\n  grid-column-gap: 1rem;\n  grid-row-gap: 1rem;\n  margin-bottom: 20px;\n  .canvas-wrapper{\n    display: flex;\n    align-items: center;\n    justify-content: center;\n  }\n"]);return v=function(){return n},n}var h=(0,u.ZP)(o.m).withConfig({componentId:"sc-9170d794-0"})(v()),x=function(){var n=(0,a.useRef)(null),e=(0,r._)((0,a.useState)(""),2),t=e[0],i=e[1],u=(0,a.useCallback)(function(){t&&s.rT(n.current,t,{margin:0,width:300})},[t]);return(0,c.jsxs)(h,{children:[(0,c.jsx)("div",{children:(0,c.jsxs)(l.Z,{direction:"vertical",children:[(0,c.jsx)(d.Z.Text,{code:!0,children:"文本内容"}),(0,c.jsx)(f.Z.TextArea,{maxLength:100,value:t,onChange:function(n){return i(n.target.value)},rows:4,style:{width:350}}),(0,c.jsx)(p.ZP,{onClick:u,children:"生成"})]})}),(0,c.jsx)("div",{className:"canvas-wrapper",children:(0,c.jsx)("canvas",{ref:n})})]})},g=t(1037),m=t(9312),j=t(5360),w=t(6677),_=t(386),b=t(6981),C=t.n(b);function y(){var n=(0,i._)(["\n  padding: 20px;\n  margin-bottom: 20px;\n  .result{\n    position: relative;\n  }\n  .copy{\n    position: absolute;\n    top: 10px;\n    right: 10px;\n  }\n  .file-wrapper{\n    position: relative;\n    input {\n      position: absolute;\n      pointer-events: none;\n      opacity: 0;\n    }\n  }\n"]);return y=function(){return n},n}function k(){var n=(0,i._)(["\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  position: fixed;\n  top: 0;\n  bottom: 0;\n  left: 0;\n  right: 0;\n  overflow: hidden;\n  z-index: 10;\n  background: #fff;\n  .cancel{\n    position: absolute;\n    top: 20px;\n    left: 20px;\n  }\n"]);return k=function(){return n},n}var E=(0,u.ZP)(o.m).withConfig({componentId:"sc-94867ccb-0"})(y()),N=function(){var n,e,t=(0,a.useRef)(null),i=(0,a.useRef)(),u=(0,w.useRouter)(),o=(0,r._)((0,a.useState)(null!==(e=u.query.result)&&void 0!==e?e:""),2),s=o[0],l=o[1],d=(0,r._)((0,a.useState)(!1),2),f=d[0],v=d[1],h=(0,a.useCallback)((n=(0,g._)(function(n){var e,t,r,c;return(0,m.Jh)(this,function(u){switch(u.label){case 0:if(!(t=null===(e=n.target.files)||void 0===e?void 0:e[0]))return[3,2];return[4,null===(r=i.current)||void 0===r?void 0:r.getQRResult(t)];case 1:l(null==(c=u.sent())?void 0:c.data),u.label=2;case 2:return[2]}})}),function(e){return n.apply(this,arguments)}),[]),x=(0,a.useCallback)(function(n){v(!1),n&&l(n)},[]);return(0,a.useEffect)(function(){i.current=new j.T$},[]),(0,c.jsxs)(E,{children:[(0,c.jsxs)("div",{className:"file-wrapper",children:[(0,c.jsx)("input",{onChange:h,type:"file",accept:"image/*",ref:t}),(0,c.jsx)(p.ZP,{onClick:function(){var n;return null===(n=t.current)||void 0===n?void 0:n.click()},children:"选择图片"})]}),(0,c.jsx)(p.ZP,{onClick:function(){return v(!0)},children:"扫描二维码"}),s?(0,c.jsx)("div",{className:"result",children:(0,c.jsxs)("pre",{children:[(0,c.jsx)("code",{children:s}),(0,c.jsx)(_.C,{content:s,className:"copy"})]})}):null,f?(0,c.jsx)(A,{onFinish:x}):null]})},Z=u.ZP.div.withConfig({componentId:"sc-94867ccb-1"})(k()),A=function(n){var e=(0,a.useRef)(null),t=(0,a.useRef)(),r=n.onFinish,i=(0,a.useRef)(r);i.current=r;var u=(0,a.useCallback)(function(n){var e;null===(e=i.current)||void 0===e||e.call(i,n)},[]);return(0,a.useEffect)(function(){var n,r,i=e.current,c=i.getContext("2d",{willReadFrequently:!0}),o=document.createElement("video");o.setAttribute("playsinline","true"),null===(n=window.navigator.mediaDevices)||void 0===n||n.getUserMedia({video:{facingMode:"environment"}}).then(function(n){r=n,o.srcObject=n,o.play(),t.current&&cancelAnimationFrame(t.current),t.current=requestAnimationFrame(a)});var a=function(){if(c&&o&&o.readyState===o.HAVE_ENOUGH_DATA){i.width=o.videoWidth,i.height=o.videoHeight,c.drawImage(o,0,0,o.videoWidth,o.videoHeight);var n=c.getImageData(0,0,o.videoWidth,o.videoHeight);if(n){var e=C()(n.data,n.width,n.height,{inversionAttempts:"dontInvert"});e&&e.data&&u(e.data)}}t.current&&cancelAnimationFrame(t.current),t.current=requestAnimationFrame(a)};return function(){t.current&&(cancelAnimationFrame(t.current),t.current=void 0),r&&r.getVideoTracks().forEach(function(n){return n.stop()})}},[u]),(0,c.jsxs)(Z,{children:[(0,c.jsx)(p.ZP,{className:"cancel",onClick:function(){return u()},children:"取消"}),(0,c.jsx)("canvas",{ref:e})]})}},7208:function(n,e,t){"use strict";t.r(e),t.d(e,{__N_SSG:function(){return u},description:function(){return s},frontMatter:function(){return o},tag:function(){return l},title:function(){return a},updated:function(){return d}});var r=t(4246),i=t(978),c=t(5685),u=!0,o={title:"二维码生成",description:"生成二维码、二维码生成器",tag:["工具"],updated:"2023-02-22T07:57:53.000Z"},a="二维码生成",s="生成二维码、二维码生成器",l=["工具"],d="2023-02-22T07:57:53.000Z",f=function(n){return(0,r.jsx)(c.s,n)};function p(n){return(0,r.jsx)(i.Q,{})}e.default=function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,r.jsx)(f,Object.assign({},n,{children:(0,r.jsx)(p,n)}))}},3121:function(n){"use strict";n.exports=ReactTransitionGroup},9378:function(n){"use strict";n.exports=algoliasearch},7513:function(n){"use strict";n.exports=rxjs}},function(n){n.O(0,[9894,2128,3554,4433,5685,9774,2888,179],function(){return n(n.s=5849)}),_N_E=n.O()}]);